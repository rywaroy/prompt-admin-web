import{g as F,b as O,u as V,c as A,d as U}from"./index-e86b1908.js";import{r as N,F as j,a as d,o as G,b as $,w as l,c as o,h as _,i as q,m as w,u as h,g as B,t as L,k as y,p as M,q as C,d as T,f as R,v as D,M as E}from"./index-c1bc0cdf.js";const P=B({name:"UpdateGroup"}),z=Object.assign(P,{props:{visible:Boolean,formState:Object},emits:["update:visible","submit"],setup(s,{emit:v}){const p=s,I={span:4},a={span:14},i=N({name:[{required:!0,message:"请输入名称"}],orderIndex:[{required:!0,message:"请输入排序"}]}),{resetFields:f,validate:g,validateInfos:k}=j.useForm(p.formState,i),x=()=>{v("update:visible",!1)},S=()=>{g().then(()=>{v("submit",L(p.formState))})};return(e,t)=>{const n=d("a-form-item"),u=d("a-input"),c=d("a-input-number"),r=d("a-form"),b=d("a-modal");return G(),$(b,{title:s.formState.id?"编辑":"新增",visible:s.visible,onCancel:x,onOk:S},{default:l(()=>[o(r,{"label-col":I,"wrapper-col":a},{default:l(()=>[o(n,{label:"父级"},{default:l(()=>[_(q(s.formState.parentName),1)]),_:1}),o(n,w({label:"名称"},h(k).name),{default:l(()=>[o(u,{value:s.formState.name,"onUpdate:value":t[0]||(t[0]=m=>s.formState.name=m)},null,8,["value"])]),_:1},16),o(n,w({label:"排序"},h(k).orderIndex),{default:l(()=>[o(c,{value:s.formState.orderIndex,"onUpdate:value":t[1]||(t[1]=m=>s.formState.orderIndex=m)},null,8,["value"])]),_:1},16)]),_:1})]),_:1},8,["title","visible"])}}}),H={class:"table-page-wrapper"},J={class:"table-page-toolbar"},K=C("div",{class:"table-title"},"查询表格",-1),Q={class:"table-operation"},W=B({name:"Group"}),Z=Object.assign(W,{setup(s){const v=[{title:"名称",dataIndex:"name"},{title:"排序",dataIndex:"orderIndex"},{title:"操作",dataIndex:"action",width:"220px"}],p=y([]);let I;const a=N({}),i=y(!1),f=()=>{F().then(e=>{I=e.data;const t=O(e.data);p.value=t})},g=e=>{a.id=null,a.name="",a.orderIndex=10,e&&(a.parentId=e.id,a.parentName=e.name),i.value=!0},k=e=>{if(a.id=e.id,a.name=e.name,a.orderIndex=e.orderIndex,a.parentId=e.parentId,e.parentId){const t=I.find(n=>n.id===e.parentId);a.parentName=t?t.name:null}i.value=!0},x=e=>{const{id:t,name:n,orderIndex:u,parentId:c}=e;t?V({id:t,name:n,orderIndex:u,parentId:c}).then(r=>{i.value=!1,f()}):A({name:n,orderIndex:u,parentId:c}).then(r=>{i.value=!1,f()})},S=e=>{E.confirm({title:"确认删除",content:`确认删除分组${e.name}吗？`,onOk(){U({id:e.id}).then(t=>{f()})}})};return M(()=>{f()}),(e,t)=>{const n=d("a-button"),u=d("a-table"),c=d("page-container");return G(),$(c,null,{default:l(()=>[C("div",H,[C("div",J,[K,C("div",Q,[o(n,{type:"primary",onClick:t[0]||(t[0]=r=>g())},{default:l(()=>[_("新建")]),_:1})])]),o(u,{"row-key":"id",loading:e.loading,"data-source":p.value,columns:v,pagination:e.pagination,"row-selection":e.rowSelection,onChange:e.handleTableChange},{bodyCell:l(({column:r,record:b})=>[r.dataIndex==="action"?(G(),T(R,{key:0},[o(n,{type:"link",onClick:m=>g(b)},{default:l(()=>[_("新增")]),_:2},1032,["onClick"]),o(n,{type:"link",onClick:m=>k(b)},{default:l(()=>[_("编辑")]),_:2},1032,["onClick"]),o(n,{type:"link",danger:"",onClick:m=>S(b)},{default:l(()=>[_("删除")]),_:2},1032,["onClick"])],64)):D("",!0)]),_:1},8,["loading","data-source","pagination","row-selection","onChange"])]),o(z,{visible:i.value,"onUpdate:visible":t[1]||(t[1]=r=>i.value=r),"form-state":a,onSubmit:x},null,8,["visible","form-state"])]),_:1})}}});export{Z as default};
